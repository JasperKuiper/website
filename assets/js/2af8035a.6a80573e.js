"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[11272],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return d}});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var u=a.createContext({}),l=function(e){var t=a.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=l(e.components);return a.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,u=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=l(r),d=n,m=h["".concat(u,".").concat(d)]||h[d]||c[d]||i;return r?a.createElement(m,o(o({ref:t},p),{},{components:r})):a.createElement(m,o({ref:t},p))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=h;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:n,o[1]=s;for(var l=2;l<i;l++)o[l]=r[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}h.displayName="MDXCreateElement"},53429:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return u},default:function(){return d},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return c}});var a=r(83117),n=r(80102),i=(r(67294),r(3905)),o=["components"],s={},u="How-To",l={unversionedId:"charts/stable/wg-easy/setup-guide",id:"charts/stable/wg-easy/setup-guide",title:"How-To",description:"This is a quick how-to or setup-guide to have a local Wireguard server using on your TrueNAS box.",source:"@site/docs/charts/stable/wg-easy/setup-guide.md",sourceDirName:"charts/stable/wg-easy",slug:"/charts/stable/wg-easy/setup-guide",permalink:"/docs/charts/stable/wg-easy/setup-guide",draft:!1,editUrl:"https://github.com/truecharts/website/tree/master/docs/charts/stable/wg-easy/setup-guide.md",tags:[],version:"current",frontMatter:{},sidebar:"chartsSidebar",previous:{title:"Changelog",permalink:"/docs/charts/stable/wg-easy/CHANGELOG"},next:{title:"wger",permalink:"/docs/charts/stable/wger/"}},p={},c=[{value:"Requirements",id:"requirements",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Wg-Easy Chart Setup",id:"wg-easy-chart-setup",level:2},{value:"Support",id:"support",level:2}],h={toc:c};function d(e){var t=e.components,s=(0,n.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},h,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"how-to"},"How-To"),(0,i.kt)("p",null,"This is a quick how-to or setup-guide to have a local Wireguard server using on your TrueNAS box.\nThis can be applied to other systems but this specific guide is SCALE specific with the prerequisites."),(0,i.kt)("h2",{id:"requirements"},"Requirements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Domain name (can be free using DuckDNS or any DDNS) that has your current WAN IP, WAN IP not recommended unless you have a static IP")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"UDP Port 51820 (or whichever port you specify in Step 4 of the chart setup) Open on your firewall with port-forwarding to your TrueNAS box (this is for the Wireguard Tunnel). This will vary based on the router/firewall setup you're using, for example my Mikrotik has a Firewall rule setup"),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"wg-easy-firewall-ex1",src:r(28029).Z,width:"751",height:"823"}),"\n",(0,i.kt)("img",{alt:"wg-easy-firewall-ex2",src:r(75823).Z,width:"939",height:"751"}))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"WG-Easy Charts chart"))),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"For proper access to your local network (LAN), this chart requires two ",(0,i.kt)("inlineCode",{parentName:"p"},"sysctl")," values set on your TrueNAS or system. For TrueNAS SCALE the way to change these values are inside ",(0,i.kt)("inlineCode",{parentName:"p"},"System")," then ",(0,i.kt)("inlineCode",{parentName:"p"},"Advanced"),". On that screen you add the following two values"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"net.ipv4.ip_forward")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"net.ipv4.conf.all.src_valid_mark"))),(0,i.kt)("p",null,"Set them to ",(0,i.kt)("inlineCode",{parentName:"p"},"1")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Enabled")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"wg-easy-sysctl",src:r(79414).Z,width:"806",height:"174"})),(0,i.kt)("h2",{id:"wg-easy-chart-setup"},"Wg-Easy Chart Setup"),(0,i.kt)("p",null,"Step 1-2: Name chart and leave defaults for Step 2"),(0,i.kt)("p",null,"Step 3:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Change ",(0,i.kt)("inlineCode",{parentName:"li"},"WG_HOST")," ",(0,i.kt)("em",{parentName:"li"},"required")," domain name (or WAN IP if you have a Static IP)"),(0,i.kt)("li",{parentName:"ul"},"Change ",(0,i.kt)("inlineCode",{parentName:"li"},"WG_DEFAULT_ADDRESS")," only if it conflicts with other IP addresses on your network"),(0,i.kt)("li",{parentName:"ul"},"Change ",(0,i.kt)("inlineCode",{parentName:"li"},"WG_DEFAULT_DNS")," can be set to your local DNS (eg my PiHole box) or a generic one like ",(0,i.kt)("inlineCode",{parentName:"li"},"1.1.1.1")),(0,i.kt)("li",{parentName:"ul"},"Change ",(0,i.kt)("inlineCode",{parentName:"li"},"ADMIN_PASSWORD")," ",(0,i.kt)("em",{parentName:"li"},"required")," - Always best to have some security in front of the GUI page")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"wg-easy-chart-config",src:r(47299).Z,width:"1167",height:"1714"})),(0,i.kt)("p",null,"Step 4:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The default port for the Wireguard UDP service is ",(0,i.kt)("inlineCode",{parentName:"li"},"51820")," and it needs to be accessible outside your network in order for the Wireguard tunnel to work. Therefore if you change this port make sure you change the port on your Firewall as well.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"wg-easy-networking",src:r(92151).Z,width:"1168",height:"1326"})),(0,i.kt)("p",null,"Steps 5-8: Adjust as necessary but defaults are fine unless using Ingress, where you can refer to our ",(0,i.kt)("a",{parentName:"p",href:"https://truecharts.org/docs/manual/SCALE%20Apps/Quick-Start%20Guides/add-ingress"},"Quick-Start Guides")," for an overview"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Recommended")," If you're creating multiple users setting up Ingress for the Portal/GUI page is a secure and easy way to download your Wireguard configs or use the handy QR code scanner from your mobile device with the Wireguard app on iOS or Android."),(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("img",{alt:"wg-chart-gui",src:r(83729).Z,width:"2542",height:"643"}))),(0,i.kt)("p",null,"There's a few options in the upstream container that aren't present by default in this chart that can be added as environment values. Please refer to the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/weejewel/wg-easy"},"upstream")," documentation as necessary and add those ENV VARS at your discretion without any support."),(0,i.kt)("h2",{id:"support"},"Support"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"If you need more details or have a more custom setup the documentation on the ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/weejewel/wg-easy"},"upstream")," is very complete so check the descriptions of the options there."),(0,i.kt)("li",{parentName:"ul"},"You can also reach us using ",(0,i.kt)("a",{parentName:"li",href:"https://discord.gg/tVsPTHWTtr"},"Discord")," for real-time feedback and support"),(0,i.kt)("li",{parentName:"ul"},"If you found a bug in our chart, open a Github ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/truecharts/apps/issues/new/choose"},"issue"))),(0,i.kt)("hr",null),(0,i.kt)("p",null,"All Rights Reserved - The TrueCharts Project"))}d.isMDXComponent=!0},47299:function(e,t,r){t.Z=r.p+"assets/images/wg-easy-chart-config-8c481e1c5e413506ee63076d2adafd24.png"},28029:function(e,t,r){t.Z=r.p+"assets/images/wg-easy-firewall-ex1-c5ff5c8dc0e4819e9178e78da507433c.png"},75823:function(e,t,r){t.Z=r.p+"assets/images/wg-easy-firewall-ex2-434a55f662991179a2a3c62fcd8f43b9.png"},83729:function(e,t,r){t.Z=r.p+"assets/images/wg-easy-gui-49262abb0f7e2c17e51d7ecbb6977217.png"},92151:function(e,t,r){t.Z=r.p+"assets/images/wg-easy-networking-62ce4d60282c8578a843d2ce667e5d9f.png"},79414:function(e,t,r){t.Z=r.p+"assets/images/wg-easy-sysctl-bc7767ea1b04f9eb2f642ef3e8ce7a89.png"}}]);